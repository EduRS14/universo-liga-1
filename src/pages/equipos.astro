---
import Layout from '../layouts/Layout.astro';
import type { Equipo } from '../types/equipo';
import EquiposData from '../data/equipos/equipos.json';

const equipos: Equipo[] = EquiposData;

const urls_img_alternas : string[] = [
    '/img/equipos/bn/adt.webp',
    '/img/equipos/bn/aas.webp',
    '/img/equipos/bn/alima.webp',
    '/img/equipos/bn/ag.webp',
    '/img/equipos/bn/cienciano.webp',
    '/img/equipos/bn/comerciantes.webp',
    '/img/equipos/bn/cusco.webp',
    '/img/equipos/bn/garcilaso.webp',
    '/img/equipos/bn/moquegua.webp',
    '/img/equipos/bn/melgar.webp',
    '/img/equipos/bn/cajamarca.webp',
    '/img/equipos/bn/jpii.webp',
    '/img/equipos/bn/chankas.webp',
    '/img/equipos/bn/sb.webp',
    '/img/equipos/bn/huancayo.webp',
    '/img/equipos/bn/sc.webp',
    '/img/equipos/bn/u.webp',
    '/img/equipos/bn/utc.webp'
];

const background_equipos : string[] = [
    'linear-gradient(90deg,rgba(171, 153, 15, 0.77) 0%, rgba(25, 86, 255, 0.73) 100%)',
    'linear-gradient(90deg,rgba(227, 227, 227, 0.78) 0%, rgba(70, 148, 232, 0.87) 100%)',
    'linear-gradient(90deg,rgba(209, 207, 207, 0.77) 0%, rgba(13, 16, 117, 0.72) 100%)',
    'linear-gradient(90deg,rgba(171, 15, 15, 0.77) 0%, rgba(251, 244, 27, 0.72) 100%)',
    'linear-gradient(90deg,rgba(186, 189, 207, 0.77) 0%, rgba(115, 6, 6, 0.77) 100%)',
    'linear-gradient(90deg,rgba(42, 112, 42, 0.77) 0%, rgba(77, 5, 87, 0.77) 100%)',
    'linear-gradient(90deg,rgba(102, 88, 19, 0.77) 0%, rgba(26, 24, 6, 0.87) 100%)',
    'linear-gradient(90deg,rgba(56, 150, 144, 0.82) 0%, rgba(145, 28, 28, 0.87) 100%)',
    'linear-gradient(90deg,rgba(217, 217, 217, 0.78) 0%, rgba(59, 57, 57, 0.87) 100%)',
    'linear-gradient(90deg,rgba(138, 21, 25, 0.82) 0%, rgba(5, 0, 0, 0.87) 100%)',
    'linear-gradient(90deg,rgba(240, 234, 67, 0.78) 0%, rgba(64, 64, 194, 0.87) 100%)',
    'linear-gradient(90deg,rgba(181, 176, 25, 0.82) 0%, rgba(217, 166, 104, 0.87) 100%)',
    'linear-gradient(90deg,rgba(237, 151, 76, 0.77) 0%, rgba(140, 14, 81, 0.72) 100%)',
    'linear-gradient(90deg,rgba(191, 73, 144, 0.78) 0%, rgba(5, 0, 0, 0.87) 100%)',
    'linear-gradient(90deg,rgba(153, 149, 44, 0.82) 0%, rgba(168, 12, 12, 0.87) 100%)',
    'linear-gradient(90deg,rgba(240, 240, 240, 0.78) 0%, rgba(0, 158, 158, 0.87) 100%)',
    'linear-gradient(90deg,rgba(255, 225, 176, 0.78) 0%, rgba(158, 0, 0, 0.87) 100%)',
    'linear-gradient(90deg,rgba(199, 167, 161, 0.78) 0%, rgba(232, 70, 70, 0.87) 100%)'
];

---

<Layout>

    <main>

        <div class="container-fluid">
	    	<div class="row">

                <div class="col-12 contenedor-titulo-calculadora">
                    <div class="row gx-0 justify-content-center align-items-center">
                        <div class="col-6">
                            <h1 class="text-center titulo-calculadora">EQUIPOS LIGA 1 2026</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid contenedor-equipos">

            <div class="row justify-content-center align-items-center">

                <div class="col-11 col-lg-10">

                    <div class="row justify-content-center align-items-center">

                        {equipos.map((equipo, index) => (
                            <div id={`equipo-${equipo.id}`} class="col-4 col-lg-2 contenedor-carta-equipo text-center p-3">
                                <div class="carta">
                                    <div class="carta-inner">
                                    
                                        <!-- Cara frontal -->
                                        <div class="carta-front">
                                          <img class="img-fluid img-equipo" src={`${equipo.url_foto}`} alt={`Logo de ${equipo.nombre}`} />
                                        </div>
                                        <!-- Cara trasera -->
                                        <div class="carta-back" style= {`background: ${background_equipos[index % background_equipos.length]}`} >
                                            <h3 class="nombre-equipo">{equipo.nombre}</h3>
                                            <img class="img-fluid img-equipo-secundario" src={`${urls_img_alternas[index % urls_img_alternas.length]}`} alt={`Logo alternativo de ${equipo.nombre}`} />
                                            <a class="btn-ver-mas" href={`/equipos/${equipo.id}`}>Ver más</a>
                                        </div>
                                    </div>
                                
                                </div>
                            </div>
                        ))}

                    </div>

                </div>
            
            </div>

        </div>

    </main>

</Layout>

<style>

    .contenedor-equipos{
        margin: 5rem 0;
    }

    .contenedor-carta-equipo{
        perspective: 1000px;
        transform-style: preserve-3d;
        padding: 1rem 2rem;
        display: flex;
        justify-content: center; /* centro horizontal */
        align-items: center;
    }

    .titulo-equipos{
        color: rgb(238, 238, 238)
    }

    .nombre-equipo{
        color: white;
        font-size: 1rem;
        z-index: 2;
        font-weight: 600;
        text-shadow:
            1px 1px 2px #000,
            -1px 1px 2px #000,
            -1px -1px 2px #000,
            1px -1px 2px #000;
    }

    .img-equipo{
        max-height: 80px;
        width: auto;
        filter: drop-shadow(0 4px 8px rgba(255, 255, 255, 0.4));
    }

    .img-equipo-secundario{
        position: absolute;
        inset: 0;
        margin: auto;
        max-width: 100px;
        width: auto;
        opacity: 0.12;
        z-index: 1;
        pointer-events: none; /* no interfiere con hover/click */
        filter: grayscale(100%) drop-shadow(0 4px 6px rgba(0,0,0,0.4));
    }

    .carta {
        width: 150px;
        height: 180px;
        perspective: 1000px; /* Profundidad 3D */
    }

    .carta-inner {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.8s ease;
        transform-style: preserve-3d;
    }

    .carta:hover .carta-inner {
        transform: rotateY(-180deg);
    }

    /* Caras */
    .carta-front, .carta-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
    }

    /* Frente */
    .carta-front {
        background: linear-gradient(90deg,rgba(21, 80, 158, 0.62) 0%, rgba(230, 103, 103, 0.55) 100%);
        border: 3px solid white;
    }

    /* Atrás */
    .carta-back {
        background-color: rgb(52, 64, 235);
        border: 3px solid white;
        transform: rotateY(-180deg);
    }

    .btn-ver-mas{
        z-index: 2;
        cursor: pointer;
        margin-top: 1.5rem;
        border: none;
        border-radius: 4px;
        background-color: white;
        color: black;
        text-decoration: none;
        font-weight: 500;
        font-size: 1rem;
        padding: 0.2rem 0.5rem;

    }

    .btn-ver-mas:hover{
        font-weight: 700;
    }

    .btn-ver-mas:active{
        background-color: #5c5c5c;
    }

    @media (max-width: 768px) {

        .contenedor-equipos{
            margin: 2rem 0;
        }

        .carta {
            width: 120px;
            height: 140px;
            perspective: 1000px;
        }

        .nombre-equipo{
            font-size: 0.6rem;
        }

        .img-equipo{
            max-height: 60px;
            width: auto;
        }

        .img-equipo-secundario{
            max-height: 80px;
            width: auto;
        }

        .btn-ver-mas{
            font-size: 0.8rem;
            padding: 0.2rem 0.4rem;
        }
    }

</style>